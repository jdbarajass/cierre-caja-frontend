const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CyL1hZVV.js","assets/react-vendor-BQCAaWH2.js","assets/dateUtils-DZMPK1fN.js","assets/icons-D9BTODEp.js","assets/MonthlySales-jboRyN1e.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,r=(r,t,s)=>((r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s)(r,"symbol"!=typeof t?t+"":t,s);import{r as t,a as s,N as n,g as a,R as o,u as l,B as i,b as c,c as d}from"./react-vendor-BQCAaWH2.js";import{A as u,R as m,L as h}from"./icons-D9BTODEp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var p={exports:{}},x={},f=t,b=Symbol.for("react.element"),g=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,j=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v={key:!0,ref:!0,__self:!0,__source:!0};function w(e,r,t){var s,n={},a=null,o=null;for(s in void 0!==t&&(a=""+t),void 0!==r.key&&(a=""+r.key),void 0!==r.ref&&(o=r.ref),r)y.call(r,s)&&!v.hasOwnProperty(s)&&(n[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===n[s]&&(n[s]=r[s]);return{$$typeof:b,type:e,key:a,ref:o,props:n,_owner:j.current}}x.Fragment=g,x.jsx=w,x.jsxs=w,p.exports=x;var N=p.exports,S={},E=s;S.createRoot=E.createRoot,S.hydrateRoot=E.hydrateRoot;const _={},k=function(e,r,t){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(r.map(e=>{if((e=function(e){return"/"+e}(e))in _)return;_[e]=!0;const r=e.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=r?"stylesheet":"modulepreload",r||(n.as="script"),n.crossOrigin="",n.href=e,t&&n.setAttribute("nonce",t),document.head.appendChild(n),r?new Promise((r,t)=>{n.addEventListener("load",r),n.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return s.then(r=>{for(const e of r||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};const C=new class{log(...e){}warn(...e){}error(...e){}info(...e){}debug(...e){}group(e){}groupEnd(){}table(e){}time(e){}timeEnd(e){}},O=t.createContext(null),I=({children:e})=>{const[r,s]=t.useState(null),[n,a]=t.useState(null),[o,l]=t.useState(!0),[i,c]=t.useState(0),[d,u]=t.useState(null);t.useEffect(()=>{const e=localStorage.getItem("authToken"),r=localStorage.getItem("authUser");if(e&&r)try{const t=JSON.parse(r);if(t.loginTime){const r=new Date(t.loginTime).getTime();Date.now()-r>288e5?(C.warn("Sesión expirada"),m()):(a(e),s(t))}}catch(t){C.error("Error al restaurar sesión:",t),m()}l(!1)},[]);const m=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),a(null),s(null)},h={user:r,token:n,login:(e,r)=>{if(d&&(Date.now()<d||(u(null),c(0),0))){return{success:!1,error:`Cuenta bloqueada. Intenta nuevamente en ${Math.ceil((d-Date.now())/1e3/60)} minutos.`}}if(!e||!r)return{success:!1,error:"Email y contraseña son requeridos"};if(!(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(e))return{success:!1,error:"Formato de email inválido"};if(r.length<8)return{success:!1,error:"La contraseña debe tener al menos 8 caracteres"};if("ventaspuertocarreno@gmail.com"===e&&"VentasCarreno2025.*"===r){c(0),u(null);const r=btoa(`${e}:${Date.now()}`),t={email:e,name:"Usuario Ventas",loginTime:(new Date).toISOString()};return localStorage.setItem("authToken",r),localStorage.setItem("authUser",JSON.stringify(t)),a(r),s(t),C.info("Login exitoso para:",e),{success:!0}}{const e=i+1;if(c(e),e>=5){const e=Date.now()+9e5;return u(e),C.warn("Cuenta bloqueada después de 5 intentos fallidos"),{success:!1,error:"Demasiados intentos fallidos. Cuenta bloqueada por 15 minutos."}}return C.warn(`Intento de login fallido (${e}/5)`),{success:!1,error:`Credenciales incorrectas (${e}/5 intentos)`}}},logout:m,isAuthenticated:()=>!!n&&!!r,loading:o};return N.jsx(O.Provider,{value:h,children:e})},P=()=>{const e=t.useContext(O);if(!e)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return e},T=({children:e})=>{const{isAuthenticated:r,loading:t}=P();return t?N.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),N.jsx("p",{className:"text-gray-600 font-medium",children:"Verificando sesión..."})]})}):r()?e:N.jsx(n,{to:"/login",replace:!0})};var R={exports:{}};function D(){}function L(){}L.resetWarningCache=D;R.exports=function(){function e(e,r,t,s,n,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function r(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:L,resetWarningCache:D};return t.PropTypes=t,t}();const A=a(R.exports);class q extends o.Component{constructor(e){super(e),r(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){C.error("Error capturado por Error Boundary:",e,r),this.setState({error:e,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:N.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:N.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:N.jsxs("div",{className:"flex flex-col items-center text-center",children:[N.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:N.jsx(u,{className:"w-10 h-10 text-red-600"})}),N.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"¡Ups! Algo salió mal"}),N.jsx("p",{className:"text-gray-600 mb-6",children:"Lo sentimos, ha ocurrido un error inesperado. Por favor, intenta nuevamente."}),!1,N.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg",children:[N.jsx(m,{className:"w-5 h-5"}),"Reintentar"]}),N.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Si el problema persiste,"," ",N.jsx("a",{href:"mailto:soporte@koaj.com",className:"text-blue-600 hover:underline",children:"contacta a soporte"})]})]})})}):this.props.children}}q.propTypes={children:A.node.isRequired,fallback:A.node};const $=()=>{const[e,r]=t.useState(""),[s,n]=t.useState(""),[a,o]=t.useState(""),[i,c]=t.useState(!1),{login:d}=P(),m=l();return N.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:N.jsx("div",{className:"max-w-md w-full",children:N.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("div",{className:"inline-flex items-center justify-center mb-3",children:N.jsx("div",{className:"bg-gray-900 rounded-2xl p-3 shadow-lg",children:N.jsx("div",{className:"text-white text-xl font-bold tracking-widest",style:{fontFamily:"Arial, sans-serif",letterSpacing:"0.3em"},children:"KOAJ"})})}),N.jsx("div",{className:"mb-3",children:N.jsx("p",{className:"text-lg font-semibold text-blue-600",children:"Puerto Carreño"})}),N.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sistema de Cierre de Caja y Arqueo Diario"}),N.jsx("p",{className:"text-gray-600",children:"Inicia sesión para acceder al sistema"})]}),a&&N.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[N.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),N.jsx("p",{className:"text-sm text-red-800",children:a})]}),N.jsxs("form",{onSubmit:async r=>{r.preventDefault(),o(""),c(!0);try{const r=d(e,s);r.success?m("/"):o(r.error||"Error al iniciar sesión")}catch(t){o("Error al iniciar sesión. Por favor intenta de nuevo.")}finally{c(!1)}},className:"space-y-6",children:[N.jsxs("div",{children:[N.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electrónico"}),N.jsx("input",{id:"email",type:"email",value:e,onChange:e=>r(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none",placeholder:"usuario@ejemplo.com",disabled:i})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),N.jsx("input",{id:"password",type:"password",value:s,onChange:e=>n(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none",placeholder:"••••••••",disabled:i})]}),N.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Iniciando sesión..."]}):N.jsxs(N.Fragment,{children:[N.jsx(h,{className:"w-5 h-5"}),"Iniciar sesión"]})})]}),N.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:N.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Sistema de Gestión de Cierre de Caja v5.0"})})]})})})},F=t.lazy(()=>k(()=>import("./Dashboard-CyL1hZVV.js").then(e=>e.D),__vite__mapDeps([0,1,2,3]))),U=t.lazy(()=>k(()=>import("./MonthlySales-jboRyN1e.js"),__vite__mapDeps([4,1,2,3]))),B=()=>N.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),N.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Cargando..."})]})}),V=()=>N.jsx(q,{children:N.jsx(I,{children:N.jsx(i,{children:N.jsx(t.Suspense,{fallback:N.jsx(B,{}),children:N.jsxs(c,{children:[N.jsx(d,{path:"/login",element:N.jsx($,{})}),N.jsx(d,{path:"/dashboard",element:N.jsx(T,{children:N.jsx(F,{})})}),N.jsx(d,{path:"/monthly-sales",element:N.jsx(T,{children:N.jsx(U,{})})}),N.jsx(d,{path:"/",element:N.jsx(n,{to:"/dashboard",replace:!0})}),N.jsx(d,{path:"*",element:N.jsx(n,{to:"/dashboard",replace:!0})})]})})})})});S.createRoot(document.getElementById("root")).render(N.jsx(o.StrictMode,{children:N.jsx(V,{})}));export{k as _,N as j,C as l,P as u};
