import{j as e}from"./index-CtZXYhnh.js";import{r as s}from"./react-vendor-CfGu_lG-.js";import{m as t,I as a,n as l,C as r,o as i,X as n}from"./icons-D9pArZQn.js";const d=({invoicesSummary:s,variant:l="compact"})=>{if(!s)return null;const r=s.voided_invoices>0;return r||"compact"!==l?"compact"===l?e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-yellow-100 text-yellow-800 rounded-md text-xs font-medium border border-yellow-200",children:[e.jsx(t,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[s.voided_invoices," anulada(s)"]})]}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Resumen de Facturas"}),e.jsxs("div",{className:"text-xs text-blue-800 space-y-0.5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total recibidas:"}),e.jsx("span",{className:"font-semibold",children:s.total_invoices})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Facturas activas:"}),e.jsx("span",{className:"font-semibold text-green-700",children:s.active_invoices})]}),r&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Anuladas (excluidas):"}),e.jsx("span",{className:"font-semibold text-yellow-700",children:s.voided_invoices})]})]})]})]})}):null},c=({voidedInvoices:a,onViewDetails:i})=>{const[n,d]=s.useState(!1);if(!a)return null;const c=a.voided_count||0,x=a.total_voided_amount_formatted||"$0",o=a.voided_summary||[];return 0===c&&0===o.length?null:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(t,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Facturas anuladas detectadas"}),e.jsxs("p",{className:"text-sm text-yellow-800",children:["Se encontraron ",e.jsx("strong",{children:c})," factura(s) anulada(s) por un total de"," ",e.jsx("strong",{children:x}),". Estas facturas han sido excluidas autom치ticamente de los c치lculos."]})]}),e.jsx("button",{onClick:()=>d(!n),className:"p-1 hover:bg-yellow-100 rounded transition-colors",title:n?"Ocultar detalles":"Ver detalles",children:n?e.jsx(l,{className:"w-5 h-5 text-yellow-700"}):e.jsx(r,{className:"w-5 h-5 text-yellow-700"})})]})}),n&&o.length>0&&e.jsxs("div",{className:"border-t border-yellow-200 bg-yellow-50/50 p-4",children:[e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsx("div",{className:"bg-white border border-yellow-200 rounded-md p-3 text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Factura #:"}),e.jsx("span",{className:"ml-2 font-semibold text-gray-900",children:s.number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsx("span",{className:"ml-2 font-semibold text-gray-900",children:s.total_formatted})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Cliente:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.client_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Fecha:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:new Date(s.date).toLocaleDateString("es-CO")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Estado:"}),e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:s.status})]})]})},s.id))}),i&&c>3&&e.jsxs("button",{onClick:i,className:"mt-3 w-full px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors",children:["Ver todas las facturas anuladas (",c,")"]})]})]})},x=({isOpen:s,onClose:a,voidedInvoices:l})=>{if(!s||!l)return null;const r=l.voided_count||0,d=l.total_voided_amount_formatted||"$0",c=l.voided_summary||[];return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-lg p-2",children:e.jsx(i,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Facturas Anuladas"}),e.jsxs("p",{className:"text-sm text-white/90",children:[r," factura(s) excluida(s) autom치ticamente"]})]})]}),e.jsx("button",{onClick:a,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(n,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"bg-yellow-50 border-b border-yellow-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Total excluido de los c치lculos:"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:d})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Estas facturas fueron detectadas como anuladas y no se incluyen en los totales de venta."})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-250px)]",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Factura #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((s,t)=>{return e.jsxs("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("code",{className:"text-sm font-semibold text-gray-900 bg-gray-100 px-2 py-1 rounded",children:s.number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:(l=s.date,new Date(l).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"}))}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.client_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-gray-900",children:s.total_formatted}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a=s.status,{void:"bg-red-100 text-red-800",cancelled:"bg-orange-100 text-orange-800",annulled:"bg-purple-100 text-purple-800",reversed:"bg-pink-100 text-pink-800"}[a]||"bg-gray-100 text-gray-800"}`,children:s.status})})]},s.id);var a,l})})]})}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Cerrar"})})})]})})]})};export{d as I,c as V,x as a};
