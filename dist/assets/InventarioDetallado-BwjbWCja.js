import{a as e,j as t,l as a}from"./index-BnWi8DhN.js";import{r as s}from"./react-vendor-CfGu_lG-.js";import{P as r}from"./Pagination-XVIX5YZQ.js";import{g as l}from"./directApiService-3aVSKyYn.js";import{P as n,e as i,k as d,T as o,D as c}from"./icons-C1UI5Wwr.js";const x=()=>{e("Inventario Detallado - Estadísticas Avanzadas");const[x,m]=s.useState([]),[h,g]=s.useState(!1),[p,u]=s.useState(""),[j,y]=s.useState((new Date).toISOString().split("T")[0]),[N,f]=s.useState(""),[b,v]=s.useState(20),[w,S]=s.useState(1),[C,I]=s.useState(!0),[P,k]=s.useState({totalQuantity:0,totalValue:0,itemCount:0}),D=async(e=N)=>{g(!0),u("");try{const t=await l(j,b,w,e);if(t.success){const e=t.data.data||[];m(e),I(e.length===b);const s=e.reduce((e,t)=>e+(t.quantity||0),0),r=e.reduce((e,t)=>e+(t.totalValue||0),0);k({totalQuantity:s,totalValue:r,itemCount:e.length}),a.info("Inventario cargado exitosamente",{items:e.length})}else u(t.error||"Error al cargar el inventario"),a.error("Error cargando inventario:",t.error)}catch(t){u("Error inesperado al cargar el inventario"),a.error("Error inesperado:",t)}finally{g(!1)}};s.useEffect(()=>{D()},[w]);const F=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e||0);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-xl shadow-lg p-6 text-white",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(n,{className:"w-8 h-8"}),t.jsx("h1",{className:"text-3xl font-bold",children:"Inventario Detallado"})]}),t.jsx("p",{className:"text-green-100",children:"Reporte completo de valor de inventario con información detallada por producto"})]}),t.jsx("form",{onSubmit:e=>{e.preventDefault(),S(1),D()},className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsxs("label",{htmlFor:"toDate",className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(i,{className:"w-4 h-4 inline mr-1"}),"Fecha Hasta"]}),t.jsx("input",{id:"toDate",type:"date",value:j,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none"})]}),t.jsxs("div",{className:"flex-1 min-w-[250px]",children:[t.jsxs("label",{htmlFor:"query",className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(d,{className:"w-4 h-4 inline mr-1"}),"Buscar Producto"]}),t.jsx("input",{id:"query",type:"text",value:N,onChange:e=>f(e.target.value),placeholder:"Nombre del producto...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none"})]}),t.jsxs("div",{className:"min-w-[150px]",children:[t.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Items por página"}),t.jsxs("select",{id:"limit",value:b,onChange:e=>v(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none",children:[t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"20",children:"20"}),t.jsx("option",{value:"50",children:"50"}),t.jsx("option",{value:"100",children:"100"})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cargando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"w-4 h-4"}),"Consultar"]})})})]})}),p&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",children:p}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.itemCount})]}),t.jsx(n,{className:"w-12 h-12 text-green-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cantidad Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.totalQuantity.toLocaleString()})]}),t.jsx(o,{className:"w-12 h-12 text-blue-500"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valor Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(P.totalValue)})]}),t.jsx(c,{className:"w-12 h-12 text-green-500"})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoría"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cantidad"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Costo Unitario"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h?t.jsx("tr",{children:t.jsx("td",{colSpan:"5",className:"px-6 py-20 text-center",children:t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-green-600 border-t-transparent rounded-full animate-spin mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando inventario..."})]})})}):0===x.length?t.jsx("tr",{children:t.jsx("td",{colSpan:"5",className:"px-6 py-20 text-center text-gray-500",children:"No se encontraron productos para los filtros seleccionados"})}):x.map((e,a)=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.itemName||"Sin nombre"}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",e.itemId]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category||"Sin categoría"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:(e.quantity||0).toLocaleString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:F(e.unitCost)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-gray-900",children:F(e.totalValue)})]},e.itemId||a))})]})}),!h&&x.length>0&&t.jsx(r,{currentPage:w,onPageChange:e=>{S(e)},hasMore:C,itemsPerPage:b})]})]})};export{x as default};
