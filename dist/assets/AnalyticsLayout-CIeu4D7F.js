import{l as e,c as s,g as a,j as t,a as r}from"./index-DBjkVFJS.js";import{r as l}from"./react-vendor-CfGu_lG-.js";import{i as d,A as n,C as c,f as i,u as o,v as x,R as m,T as h,c as p,D as g,F as u,w as b,x as j}from"./icons-yh9a4XSz.js";const y=5e4,N=()=>{var r,g,u,b;const j=a(),N=j.substring(0,8)+"01",[v,f]=l.useState(null),[_,w]=l.useState(!1),[C,k]=l.useState(null),[S,E]=l.useState({start_date:N,end_date:j}),T=async()=>{if(S.start_date&&S.end_date){w(!0),k(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date);const r=t.toString(),l="/api/analytics/dashboard"+(r?`?${r}`:"");e.info("Obteniendo dashboard completo:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener dashboard")}return await d.json()}catch(C){throw e.error("Error en getAnalyticsDashboard:",C),C}})(S);a.success?f(a.data):k(a.error||"Error al cargar el dashboard")}catch(a){k(a.message||"Error al conectar con el servidor")}finally{w(!1)}}else k("Por favor selecciona ambas fechas para consultar")};return _?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center max-w-md px-4",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-800 font-semibold mb-2",children:"Procesando an치lisis de ventas..."}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Esto puede tardar hasta 50 segundos dependiendo de la cantidad de facturas."}),t.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Por favor espera..."})]})}):C?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:C})]})]}),t.jsx("button",{onClick:T,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):v?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:S.start_date,onChange:e=>E(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:S.end_date,onChange:e=>E(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v.peak_hours&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-blue-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Horas Pico"})]}),v.peak_hours.top_5_peak_hours&&v.peak_hours.top_5_peak_hours[0]&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Mejor hora:"}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.peak_hours.top_5_peak_hours[0].hour_range}),t.jsx("div",{className:"text-sm text-gray-700",children:v.peak_hours.top_5_peak_hours[0].total_revenue_formatted}),t.jsxs("div",{className:"text-xs text-gray-500",children:[v.peak_hours.top_5_peak_hours[0].invoice_count," facturas"]})]})]}),v.top_customers&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:t.jsx(o,{className:"w-6 h-6 text-green-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Clientes"})]}),v.top_customers.summary&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Total clientes:"}),t.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.top_customers.summary.total_unique_customers}),t.jsxs("div",{className:"text-sm text-gray-700",children:["Recurrencia: ",null==(r=v.top_customers.summary.recurring_rate)?void 0:r.toFixed(1),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:v.top_customers.summary.total_revenue_formatted})]})]}),v.top_sellers&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:t.jsx(x,{className:"w-6 h-6 text-yellow-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Vendedoras"})]}),v.top_sellers.top_sellers&&v.top_sellers.top_sellers[0]&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Mejor vendedora:"}),t.jsx("div",{className:"text-lg font-bold text-yellow-600 truncate",children:v.top_sellers.top_sellers[0].seller_name}),t.jsx("div",{className:"text-sm text-gray-700",children:v.top_sellers.top_sellers[0].total_sales_formatted}),t.jsxs("div",{className:"text-xs text-gray-500",children:[v.top_sellers.top_sellers[0].invoice_count," facturas"]})]})]}),v.customer_retention&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:t.jsx(m,{className:"w-6 h-6 text-purple-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Retenci칩n"})]}),v.customer_retention.summary&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Tasa de retenci칩n:"}),t.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[null==(g=v.customer_retention.summary.retention_rate)?void 0:g.toFixed(1),"%"]}),t.jsxs("div",{className:"text-sm text-gray-700",children:["Leales: ",v.customer_retention.summary.loyal_customers]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["En riesgo: ",v.customer_retention.summary.at_risk_customers]})]})]}),v.sales_trends&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:t.jsx(h,{className:"w-6 h-6 text-indigo-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tendencias"})]}),v.sales_trends.summary&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Mejor d칤a:"}),t.jsx("div",{className:"text-lg font-bold text-indigo-600",children:null==(u=v.sales_trends.summary.best_day)?void 0:u.day_name}),t.jsx("div",{className:"text-sm text-gray-700",children:null==(b=v.sales_trends.summary.best_day)?void 0:b.total_revenue_formatted}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Promedio: ",v.sales_trends.summary.avg_revenue_per_day_formatted]})]})]}),v.cross_selling&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-pink-100 rounded-lg",children:t.jsx(p,{className:"w-6 h-6 text-pink-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cross-Selling"})]}),v.cross_selling.summary&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Combos encontrados:"}),t.jsx("div",{className:"text-2xl font-bold text-pink-600",children:v.cross_selling.summary.total_product_pairs}),v.cross_selling.top_product_pairs&&v.cross_selling.top_product_pairs[0]&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-sm text-gray-700",children:["Top combo: ",v.cross_selling.top_product_pairs[0].times_bought_together," veces"]}),t.jsx("div",{className:"text-xs text-gray-500 truncate",children:v.cross_selling.top_product_pairs[0].total_revenue_formatted})]})]})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsx("p",{className:"text-sm text-blue-800",children:"Selecciona cada secci칩n en el men칰 superior para ver el an치lisis completo con gr치ficos y tablas detalladas."})})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:S.start_date,onChange:e=>E(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:S.end_date,onChange:e=>E(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(c,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:'Elige la fecha de inicio y fecha de fin, luego presiona "Consultar Per칤odo" para ver el an치lisis completo.'})]})]})},v=()=>{const r=a(),o=r.substring(0,8)+"01",[x,m]=l.useState(null),[h,p]=l.useState(!1),[b,j]=l.useState(null),[N,v]=l.useState({start_date:o,end_date:r}),f=async()=>{if(N.start_date&&N.end_date){p(!0),j(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date);const r=t.toString(),l="/api/analytics/peak-hours"+(r?`?${r}`:"");e.info("Obteniendo horas pico:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener horas pico")}return await d.json()}catch(b){throw e.error("Error en getPeakHours:",b),b}})(N);a.success?m(a.data):j(a.error||"Error al cargar datos")}catch(a){j(a.message||"Error al conectar con el servidor")}finally{p(!1)}}else j("Por favor selecciona ambas fechas para consultar")};return h?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando horas pico..."})]})}):b?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:b})]})]}),t.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):x?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:N.start_date,onChange:e=>v(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:N.end_date,onChange:e=>v(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),x.summary&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(g,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Total Ingresos"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.summary.total_revenue_formatted})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(u,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Total Facturas"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.summary.total_invoices})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(i,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Horas con Ventas"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.summary.hours_with_sales})]})]}),x.top_5_peak_hours&&x.top_5_peak_hours.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top 5 Horas Pico"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:x.top_5_peak_hours.map((e,s)=>t.jsxs("div",{className:"border-2 rounded-lg p-4 "+(0===s?"border-yellow-400 bg-yellow-50":1===s?"border-gray-400 bg-gray-50":2===s?"border-orange-400 bg-orange-50":"border-gray-200 bg-white"),children:[t.jsx("div",{className:"text-center mb-2",children:t.jsx("span",{className:"text-3xl font-bold",children:0===s?"游볞":1===s?"游볟":2===s?"游볠":`#${s+1}`})}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.hour_range}),t.jsx("div",{className:"text-sm font-semibold text-blue-600 mt-2",children:e.total_revenue_formatted}),t.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.invoice_count," facturas"]}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Ticket: ",e.average_ticket_formatted]})]})]},e.hour))})]}),x.daily_hourly_breakdown&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ventas por D칤a de la Semana"}),t.jsx("div",{className:"space-y-4",children:Object.entries(x.daily_hourly_breakdown).map(([e,s])=>s.length>0&&t.jsxs("div",{className:"border-b border-gray-200 last:border-b-0 pb-4 last:pb-0",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:s.slice(0,6).map(e=>t.jsxs("div",{className:"bg-gray-50 rounded p-2 text-sm",children:[t.jsx("div",{className:"font-semibold text-gray-700",children:e.hour_range}),t.jsx("div",{className:"text-xs text-blue-600",children:e.total_revenue_formatted}),t.jsxs("div",{className:"text-xs text-gray-500",children:[e.invoice_count," fact."]})]},e.hour))}),s.length>6&&t.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["+",s.length-6," horas m치s"]})]},e))})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:N.start_date,onChange:e=>v(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:N.end_date,onChange:e=>v(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(i,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:"Elige las fechas de inicio y fin para visualizar las horas pico de ventas"})]})]})},f=()=>{var r;const i=a(),x=i.substring(0,8)+"01",[m,h]=l.useState(null),[p,u]=l.useState(!1),[j,N]=l.useState(null),[v,f]=l.useState(10),[_,w]=l.useState({start_date:x,end_date:i}),C=async()=>{if(_.start_date&&_.end_date){u(!0),N(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date),a.limit&&t.append("limit",a.limit.toString());const r=t.toString(),l="/api/analytics/top-customers"+(r?`?${r}`:"");e.info("Obteniendo top clientes:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener top clientes")}return await d.json()}catch(j){throw e.error("Error en getTopCustomers:",j),j}})({..._,limit:v});a.success?h(a.data):N(a.error||"Error al cargar datos")}catch(a){N(a.message||"Error al conectar con el servidor")}finally{u(!1)}}else N("Por favor selecciona ambas fechas para consultar")};return p?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando top clientes..."})]})}):j?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:j})]})]}),t.jsx("button",{onClick:C,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):m?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:_.start_date,onChange:e=>w(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:_.end_date,onChange:e=>w(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsxs("select",{value:v,onChange:e=>f(Number(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:5,children:"Top 5"}),t.jsx("option",{value:10,children:"Top 10"}),t.jsx("option",{value:20,children:"Top 20"}),t.jsx("option",{value:50,children:"Top 50"})]})]})}),m.summary&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(o,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Total Clientes"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.summary.total_unique_customers})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(g,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Total Ingresos"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.summary.total_revenue_formatted})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(b,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Ticket Promedio"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.summary.average_customer_value_formatted})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(o,{className:"w-5 h-5 text-orange-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Recurrencia"})]}),t.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[null==(r=m.summary.recurring_rate)?void 0:r.toFixed(1),"%"]})]})]}),m.top_customers&&m.top_customers.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Top ",m.top_customers.length," Clientes"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Gastado"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compras"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket Prom."}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"칔ltima Compra"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.top_customers.map((e,s)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:"font-bold "+(0===s?"text-yellow-600":1===s?"text-gray-400":2===s?"text-orange-600":"text-gray-600"),children:["#",s+1]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.customer_name}),t.jsx("div",{className:"text-xs text-gray-500",children:e.email||"Sin email"})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm font-semibold text-green-600",children:e.total_spent_formatted})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.purchase_count}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.average_ticket_formatted}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_purchase_date}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.purchase_count>=5?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.purchase_count>=5?"VIP":"Regular"})})]},e.customer_id))})]})})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:_.start_date,onChange:e=>w(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:_.end_date,onChange:e=>w(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsxs("select",{value:v,onChange:e=>f(Number(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:5,children:"Top 5"}),t.jsx("option",{value:10,children:"Top 10"}),t.jsx("option",{value:20,children:"Top 20"}),t.jsx("option",{value:50,children:"Top 50"})]}),t.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(o,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:"Elige las fechas de inicio y fin para visualizar los mejores clientes"})]})]})},_=()=>{const r=a(),i=r.substring(0,8)+"01",[o,m]=l.useState(null),[h,p]=l.useState(!1),[u,b]=l.useState(null),[j,N]=l.useState(10),[v,f]=l.useState({start_date:i,end_date:r}),_=async()=>{if(v.start_date&&v.end_date){p(!0),b(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date),a.limit&&t.append("limit",a.limit.toString());const r=t.toString(),l="/api/analytics/top-sellers"+(r?`?${r}`:"");e.info("Obteniendo top vendedoras:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener top vendedoras")}return await d.json()}catch(u){throw e.error("Error en getTopSellers:",u),u}})({...v,limit:j});a.success?m(a.data):b(a.error||"Error al cargar datos")}catch(a){b(a.message||"Error al conectar con el servidor")}finally{p(!1)}}else b("Por favor selecciona ambas fechas para consultar")};return h?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando top vendedoras..."})]})}):u?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:u})]})]}),t.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):o?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:v.start_date,onChange:e=>f(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:v.end_date,onChange:e=>f(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),o.summary&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(g,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Total Ingresos"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o.summary.total_revenue_formatted})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(x,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Promedio por Vendedora"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o.summary.average_sales_per_seller_formatted})]})]}),o.top_sellers&&o.top_sellers.length>=3&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Podio de Vendedoras"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-50 rounded-lg p-6 border-2 border-yellow-400",children:[t.jsx("div",{className:"text-center mb-4",children:t.jsx("span",{className:"text-5xl",children:"游볞"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:o.top_sellers[0].seller_name}),t.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-2",children:o.top_sellers[0].total_sales_formatted}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[t.jsxs("div",{children:[o.top_sellers[0].invoice_count," facturas"]}),t.jsxs("div",{children:["Ticket: ",o.top_sellers[0].average_ticket_formatted]}),t.jsxs("div",{className:"text-xs text-gray-600",children:["Hora productiva: ",o.top_sellers[0].most_productive_hour]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-gray-200 to-gray-50 rounded-lg p-6 border-2 border-gray-400",children:[t.jsx("div",{className:"text-center mb-4",children:t.jsx("span",{className:"text-5xl",children:"游볟"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:o.top_sellers[1].seller_name}),t.jsx("div",{className:"text-2xl font-bold text-gray-600 mb-2",children:o.top_sellers[1].total_sales_formatted}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[t.jsxs("div",{children:[o.top_sellers[1].invoice_count," facturas"]}),t.jsxs("div",{children:["Ticket: ",o.top_sellers[1].average_ticket_formatted]}),t.jsxs("div",{className:"text-xs text-gray-600",children:["Hora productiva: ",o.top_sellers[1].most_productive_hour]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-50 rounded-lg p-6 border-2 border-orange-400",children:[t.jsx("div",{className:"text-center mb-4",children:t.jsx("span",{className:"text-5xl",children:"游볠"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:o.top_sellers[2].seller_name}),t.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-2",children:o.top_sellers[2].total_sales_formatted}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[t.jsxs("div",{children:[o.top_sellers[2].invoice_count," facturas"]}),t.jsxs("div",{children:["Ticket: ",o.top_sellers[2].average_ticket_formatted]}),t.jsxs("div",{className:"text-xs text-gray-600",children:["Hora productiva: ",o.top_sellers[2].most_productive_hour]})]})]})]})]})]}),o.top_sellers&&o.top_sellers.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Ranking Completo"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vendedora"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Ventas"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Facturas"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ticket Prom."}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Clientes 칔nicos"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hora Productiva"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.top_sellers.map((e,s)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:"font-bold "+(0===s?"text-yellow-600":1===s?"text-gray-400":2===s?"text-orange-600":"text-gray-600"),children:["#",s+1]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.seller_name})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm font-semibold text-green-600",children:e.total_sales_formatted})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.invoice_count}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.average_ticket_formatted}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.unique_customers}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.most_productive_hour})]},e.seller_id))})]})})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:v.start_date,onChange:e=>f(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:v.end_date,onChange:e=>f(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(x,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:"Elige las fechas de inicio y fin para visualizar el ranking de vendedoras"})]})]})},w=()=>{var r;const i=a(),o=i.substring(0,8)+"01",[x,h]=l.useState(null),[p,g]=l.useState(!1),[u,b]=l.useState(null),[j,N]=l.useState({start_date:o,end_date:i}),v=async()=>{if(j.start_date&&j.end_date){g(!0),b(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date);const r=t.toString(),l="/api/analytics/customer-retention"+(r?`?${r}`:"");e.info("Obteniendo retenci칩n de clientes:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener retenci칩n de clientes")}return await d.json()}catch(u){throw e.error("Error en getCustomerRetention:",u),u}})(j);a.success?h(a.data):b(a.error||"Error al cargar datos")}catch(a){b(a.message||"Error al conectar con el servidor")}finally{g(!1)}}else b("Por favor selecciona ambas fechas para consultar")};return p?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando retenci칩n de clientes..."})]})}):u?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:u})]})]}),t.jsx("button",{onClick:v,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):x?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:j.start_date,onChange:e=>N(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:j.end_date,onChange:e=>N(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),x.summary&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Segmentaci칩n de Clientes"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-6 text-center",children:[t.jsx("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"Nuevos"}),t.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:x.summary.new_customers}),t.jsx("p",{className:"text-sm text-green-700",children:"1 compra"})]}),t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-6 text-center",children:[t.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Recurrentes"}),t.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:x.summary.recurring_customers}),t.jsx("p",{className:"text-sm text-blue-700",children:"2-4 compras"})]}),t.jsxs("div",{className:"bg-purple-50 border-2 border-purple-300 rounded-lg p-6 text-center",children:[t.jsx("h4",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Leales"}),t.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:x.summary.loyal_customers}),t.jsx("p",{className:"text-sm text-purple-700",children:"5+ compras"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:"Activos"}),t.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.summary.active_customers})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[t.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:"En Riesgo"}),t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.summary.at_risk_customers})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 rounded-lg",children:[t.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:"Inactivos"}),t.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.summary.inactive_customers})]})]})]}),t.jsxs("div",{className:"mt-6 text-center",children:[t.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Tasa de Retenci칩n"}),t.jsxs("div",{className:"text-5xl font-bold text-purple-600",children:[null==(r=x.summary.retention_rate)?void 0:r.toFixed(1),"%"]})]})]}),x.top_loyal_customers&&x.top_loyal_customers.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Top Clientes Leales"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Frecuencia"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Gastado"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"칔ltima Compra"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.top_loyal_customers.slice(0,10).map(e=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.customer_name})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.frequency," compras"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm font-semibold text-green-600",children:e.monetary_formatted})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.last_purchase_date}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("Activo"===e.activity_status?"bg-green-100 text-green-800":"En riesgo"===e.activity_status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.activity_status})})]},e.customer_id))})]})})]}),x.at_risk_customers&&x.at_risk_customers.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(n,{className:"w-5 h-5 text-yellow-600"}),"Clientes en Riesgo"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"D칤as Sin Comprar"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Gastado"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"칔ltima Compra"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.at_risk_customers.slice(0,10).map(e=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.customer_name})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:"text-sm font-semibold text-yellow-600",children:[e.recency_days," d칤as"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.monetary_formatted}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.last_purchase_date})]},e.customer_id))})]})})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:j.start_date,onChange:e=>N(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:j.end_date,onChange:e=>N(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(m,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:"Elige las fechas de inicio y fin para visualizar la retenci칩n de clientes"})]})]})},C=()=>{var r,i,o,x,m,p;const u=a(),b=u.substring(0,8)+"01",[j,N]=l.useState(null),[v,f]=l.useState(!1),[_,w]=l.useState(null),[C,k]=l.useState({start_date:b,end_date:u}),S=async()=>{if(C.start_date&&C.end_date){f(!0),w(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date);const r=t.toString(),l="/api/analytics/sales-trends"+(r?`?${r}`:"");e.info("Obteniendo tendencias de ventas:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener tendencias de ventas")}return await d.json()}catch(_){throw e.error("Error en getSalesTrends:",_),_}})(C);a.success?N(a.data):w(a.error||"Error al cargar datos")}catch(a){w(a.message||"Error al conectar con el servidor")}finally{f(!1)}}else w("Por favor selecciona ambas fechas para consultar")};return v?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando tendencias..."})]})}):_?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:_})]})]}),t.jsx("button",{onClick:S,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):j?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:C.start_date,onChange:e=>k(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:C.end_date,onChange:e=>k(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),j.summary&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(g,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Total Per칤odo"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j.summary.total_revenue_formatted})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(h,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Promedio Diario"})]}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j.summary.avg_revenue_per_day_formatted})]}),t.jsxs("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-6",children:[t.jsx("div",{className:"text-sm text-green-700 mb-2",children:"Mejor D칤a"}),t.jsx("div",{className:"font-semibold text-green-900",children:null==(r=j.summary.best_day)?void 0:r.day_name}),t.jsx("div",{className:"text-xl font-bold text-green-600",children:null==(i=j.summary.best_day)?void 0:i.total_revenue_formatted}),t.jsx("div",{className:"text-xs text-green-700 mt-1",children:null==(o=j.summary.best_day)?void 0:o.date})]}),t.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-6",children:[t.jsx("div",{className:"text-sm text-red-700 mb-2",children:"Peor D칤a"}),t.jsx("div",{className:"font-semibold text-red-900",children:null==(x=j.summary.worst_day)?void 0:x.day_name}),t.jsx("div",{className:"text-xl font-bold text-red-600",children:null==(m=j.summary.worst_day)?void 0:m.total_revenue_formatted}),t.jsx("div",{className:"text-xs text-red-700 mt-1",children:null==(p=j.summary.worst_day)?void 0:p.date})]})]}),j.weekday_analysis&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"An치lisis por D칤a de la Semana"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-2",children:j.weekday_analysis.map(e=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:e.day_name}),t.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:e.avg_revenue_per_day_formatted}),t.jsxs("div",{className:"text-xs text-gray-600",children:[e.invoice_count," facturas"]}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e.days_count," d칤as"]})]},e.day_name))})]}),j.daily_sales&&j.daily_sales.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Ventas Diarias"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"D칤a"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Facturas"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ticket Prom."})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.daily_sales.map(e=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.day_name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm font-semibold text-green-600",children:e.total_revenue_formatted})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.invoice_count}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.average_ticket_formatted})]},e.date))})]})})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:C.start_date,onChange:e=>k(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:C.end_date,onChange:e=>k(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(h,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:"Elige las fechas de inicio y fin para visualizar las tendencias de ventas"})]})]})},k=()=>{const r=a(),i=r.substring(0,8)+"01",[o,x]=l.useState(null),[m,h]=l.useState(!1),[u,b]=l.useState(null),[j,N]=l.useState(2),[v,f]=l.useState({start_date:i,end_date:r}),_=async()=>{if(v.start_date&&v.end_date){h(!0),b(null);try{const a=await(async(a={})=>{try{const t=new URLSearchParams;a.date&&t.append("date",a.date),a.start_date&&t.append("start_date",a.start_date),a.end_date&&t.append("end_date",a.end_date),a.min_support&&t.append("min_support",a.min_support.toString());const r=t.toString(),l="/api/analytics/cross-selling"+(r?`?${r}`:"");e.info("Obteniendo cross-selling:",a);const d=await s(l,{method:"GET"},y);if(!d.ok){const e=await d.json().catch(()=>({}));throw new Error(e.error||"Error al obtener cross-selling")}return await d.json()}catch(u){throw e.error("Error en getCrossSelling:",u),u}})({...v,min_support:j});a.success?x(a.data):b(a.error||"Error al cargar datos")}catch(a){b(a.message||"Error al conectar con el servidor")}finally{h(!1)}}else b("Por favor selecciona ambas fechas para consultar")};return m?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(d,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando an치lisis de cross-selling..."})]})}):u?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[t.jsx(n,{className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Error al cargar datos"}),t.jsx("p",{className:"text-sm",children:u})]})]}),t.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]}):o?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:v.start_date,onChange:e=>f(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:v.end_date,onChange:e=>f(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Soporte m칤nimo:"}),t.jsx("input",{type:"number",min:"1",max:"10",value:j,onChange:e=>N(Number(e.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),o.summary&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Resumen"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[t.jsx(p,{className:"w-8 h-8 text-blue-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Combos Encontrados"}),t.jsx("div",{className:"text-3xl font-bold text-blue-600",children:o.summary.total_product_pairs})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[t.jsx(g,{className:"w-8 h-8 text-purple-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Productos 칔nicos"}),t.jsx("div",{className:"text-3xl font-bold text-purple-600",children:o.summary.total_unique_products})]})]})]})]}),o.top_product_pairs&&o.top_product_pairs.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Productos que se Compran Juntos"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.top_product_pairs.map((e,s)=>{var a;return t.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-blue-400 transition-colors",children:[t.jsx("div",{className:"text-center mb-3",children:t.jsxs("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 font-semibold rounded-full text-sm",children:["#",s+1]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:e.product1,children:e.product1}),t.jsx("div",{className:"text-center text-2xl font-bold text-gray-400",children:"+"}),t.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:e.product2,children:e.product2})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-600",children:"Comprados juntos:"}),t.jsxs("span",{className:"font-semibold text-blue-600",children:[e.times_bought_together," veces"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-600",children:"Ingresos:"}),t.jsx("span",{className:"font-semibold text-green-600",children:e.total_revenue_formatted})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-600",children:"Confianza:"}),t.jsxs("span",{className:"font-semibold text-purple-600",children:[null==(a=e.avg_confidence)?void 0:a.toFixed(1),"%"]})]})]})]},s)})})]}),o.top_product_pairs&&o.top_product_pairs.length>0&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Sugerencia:"})," Estos pares de productos se compran frecuentemente juntos. Considera crear combos o promociones para incrementar las ventas."]})}),o.top_product_pairs&&0===o.top_product_pairs.length&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:t.jsxs("p",{className:"text-yellow-800",children:["No se encontraron pares de productos con el soporte m칤nimo de ",j,". Intenta reducir el soporte m칤nimo o ampliar el rango de fechas."]})})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Rango de Fechas:"})]}),t.jsx("input",{type:"date",value:v.start_date,onChange:e=>f(s=>({...s,start_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"hasta"}),t.jsx("input",{type:"date",value:v.end_date,onChange:e=>f(s=>({...s,end_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Soporte m칤nimo:"}),t.jsx("input",{type:"number",min:"1",max:"10",value:j,onChange:e=>N(Number(e.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Consultar Per칤odo"})]})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[t.jsx(p,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selecciona un per칤odo para consultar"}),t.jsx("p",{className:"text-blue-700",children:"Elige las fechas de inicio y fin para visualizar productos que se compran juntos"})]})]})},S=()=>{const[e,s]=l.useState("dashboard");r((()=>{switch(e){case"dashboard":return"Analytics - Dashboard Completo";case"peak-hours":return"Analytics - Horas Pico";case"top-customers":return"Analytics - Top Clientes";case"top-sellers":return"Analytics - Top Vendedoras";case"retention":return"Analytics - Retenci칩n de Clientes";case"trends":return"Analytics - Tendencias de Ventas";case"cross-selling":return"Analytics - Cross-Selling";default:return"Analytics Avanzado"}})());const a=[{id:"dashboard",label:"Dashboard Completo",icon:j,description:"Vista unificada de KPIs"},{id:"peak-hours",label:"Horas Pico",icon:i,description:"Mejores horas de venta"},{id:"top-customers",label:"Top Clientes",icon:o,description:"Clientes que m치s compran"},{id:"top-sellers",label:"Top Vendedoras",icon:x,description:"Vendedoras destacadas"},{id:"retention",label:"Retenci칩n",icon:m,description:"An치lisis RFM"},{id:"trends",label:"Tendencias",icon:h,description:"Patrones de venta"},{id:"cross-selling",label:"Cross-Selling",icon:p,description:"Productos relacionados"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:t.jsx(h,{className:"w-8 h-8 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytics Avanzado"}),t.jsx("p",{className:"text-sm text-gray-600",children:"An치lisis inteligente de ventas"})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 border border-gray-200",children:t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300",children:a.map(a=>{const r=a.icon,l=e===a.id;return t.jsxs("button",{onClick:()=>s(a.id),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg whitespace-nowrap transition-all "+(l?"bg-orange-600 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-orange-50 hover:text-orange-700 border border-gray-200"),children:[t.jsx(r,{className:"w-4 h-4 "+(l?"text-white":"text-gray-600")}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-sm font-semibold "+(l?"text-white":"text-gray-900"),children:a.label}),t.jsx("div",{className:"text-xs "+(l?"text-orange-100":"text-gray-500"),children:a.description})]})]},a.id)})})}),t.jsx("div",{children:(()=>{switch(e){case"dashboard":default:return t.jsx(N,{});case"peak-hours":return t.jsx(v,{});case"top-customers":return t.jsx(f,{});case"top-sellers":return t.jsx(_,{});case"retention":return t.jsx(w,{});case"trends":return t.jsx(C,{});case"cross-selling":return t.jsx(k,{})}})()})]})};export{S as default};
